# 字符串的扩展

## 字符的Unicode表示法

- 允许采用\uxxxx形式表示一个字符，其中xxxx表示字符的 Unicode 码点。（在\u0000~\uFFFF之间的字符）超出这个范围的字符，必须用**两个双字节**的形式表示。

- 如果直接在\u后面跟上超过0xFFFF的数值（比如\u20BB7），JavaScript 会理解成\u20BB+7。由于\u20BB是一个不可打印字符，所以只会显示一个空格，后面跟着一个7。

> 只要将码点放入大括号，就能正确解读该字符。
    ```
    "\u{20BB7}"
    // "𠮷"

    "\u{41}\u{42}\u{43}"
    // "ABC"

    let hello = 123;
    hell\u{6F} // 123

    '\u{1F680}' === '\uD83D\uDE80'
    // true
    ```

## 字符串的遍历器接口

- ES6 为字符串添加了遍历器接口，使得字符串可以被for...of循环遍历。


>除了遍历字符串，这个遍历器最大的优点是可以识别大于0xFFFF的码点，传统的for循环无法识别这样的码点。


## 直接输入U+2028（行分隔符）和U+2029（段分隔符）

- JavaScript 字符串允许直接输入字符，以及输入字符的转义形式。  
    如：“中”的 Unicode 码点是 U+4e2d，你可以直接在字符串里面输入这个汉字，也可以输入它的转义形式\u4e2d，两者是等价的。


- 但是，JavaScript 规定有5个字符，不能在字符串里面直接使用，只能使用转义形式。

    1. U+005C：反斜杠（reverse solidus)
    2. U+000D：回车（carriage return）
    3. U+2028：行分隔符（line separator）
    4. U+2029：段分隔符（paragraph separator）
    5. U+000A：换行符（line feed）  
    举例来说，字符串里面不能直接包含反斜杠，一定要转义写成\\或者\u005c。

> 麻烦在于 JSON 格式允许字符串里面直接使用 U+2028（行分隔符）和 U+2029（段分隔符）。这样一来，服务器输出的 JSON 被JSON.parse解析，就有可能直接报错。


## JSON.stringify()的改造

- 现在的JSON.stringify()方法有可能返回不符合 UTF-8 标准的字符串。

- 如果遇到**0xD800**到**0xDFFF**之间的单个码点，或者不存在的配对形式，它会返回转义字符串，留给应用自己决定下一步的处理。



## 模板字符串

- 用反引号（`）标识,变量名写在${}之中。
- 如果在模板字符串中需要使用反引号，则前面要用**反斜杠转义**。
- 模板字符串的空格和换行，都是被保留的，比如<ul>标签前面会有一个换行。如果你不想要这个换行，可以使用**trim**方法消除它。(.trim())
- 啥都行




## 标签模板

- 标签模板其实不是模板，而是函数调用的一种特殊形式。“标签”指的就是函数，紧跟在后面的模板字符串就是它的参数。

1. 过滤 HTML 字符串，防止用户输入恶意内容。
2. 多语言转换（国际化处理）。
3. 嵌入其他语言。

> 模板处理函数的第一个参数（模板字符串数组），还有一个raw属性。


## 模板字符串的限制

- 模板字符串内嵌其他语言，默认会将字符串转义

